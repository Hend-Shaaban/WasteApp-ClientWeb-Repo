{"version":3,"file":"dev-tools.js","sources":["../../src/components/dev-tools.ts"],"names":[],"mappings":";AAAA,qBAA2C,eAAe,CAAC,CAAA;AAC3D,yBAAwB,YAAY,CAAC,CAAA;AACrC,qBAAuB,eAAe,CAAC,CAAA;;AAEvC,IAAM,WAAW,GAAQ,OAAO,MAAM,KAAK,WAAW,GAAG,MAAM,GAAG,IAAI,CAAC;AAEvE;;GAEG;AAEH;IACE,2BAAoB,MAAsB,EAChC,OAAqB;QAFjC,iBAiDC;QAhDqB,WAAM,GAAN,MAAM,CAAgB;QAChC,YAAO,GAAP,OAAO,CAAc;QAE/B;;;;;;;;WAQG;QACH,aAAQ,GAAG,UAAC,OAAgB;YAC1B,IAAI,YAAY,CAAC;YACjB,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;gBACtB,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;YAED,0DAA0D;YAC1D,WAAW,CAAC,iBAAiB,CAAC,MAAM,CAAC,UAAC,EAAM;oBAAL,cAAI;gBACzC,EAAE,CAAC,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC,CAAC;oBACrB,YAAY,GAAG,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC;wBACpC,EAAE,CAAC,CAAC,CAAC,aAAM,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;4BAC9B,KAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;wBACrB,CAAC;oBACH,CAAC,CAAC,CAAC;gBACL,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC;oBAC3B,YAAY,EAAE,CAAC;gBACjB,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;QAChD,CAAC,CAAA;IA/BkC,CAAC;IAiCpC;;OAEG;IACH,qCAAS,GAAT;QACE,MAAM,CAAC,WAAW,IAAI,WAAW,CAAC,iBAAiB,CAAC;IACtD,CAAC,CACH,AAEE;IAFK,AAGP,kBAAkB;SAHD,GAA0B,UAC3C,EAAE,IAAI,EAAE,iBAAU,EAAE,OACnB,pDAEM,gCAAc,GAAmE,cAAM,OAAA;QAC9F,EAAC,IAAI,EAAE,qBAAc,GAAG;QACxB,EAAC,IAAI,EAAE,kBAAO,GAAG;KAChB,EAH6F,CAG7F;;;;;6GAAC;IACF,wBAAC;AAAD,CAAC,AAjDD,IAiDC;AAjDY,yBAAiB,oBAiD7B,CAAA","sourcesContent":["import { Injectable, ApplicationRef } from '@angular/core';\nimport { NgRedux } from './ng-redux';\nimport { NgZone } from '@angular/core';\ndeclare const window: any;\nconst environment: any = typeof window !== 'undefined' ? window : this;\n\n/**\n * An angular-2-ified version of the Redux DevTools chrome extension.\n */\n@Injectable()\nexport class DevToolsExtension {\n  constructor(private appRef: ApplicationRef,\n    private ngRedux: NgRedux<any>) { }\n\n  /**\n   * A wrapper for the Chrome Extension Redux DevTools.\n   * Makes sure state changes triggered by the extension\n   * trigger Angular2's change detector.\n   *\n   * @argument { Object } options: dev tool options; same\n   * format as described here: \n   * [zalmoxisus/redux-devtools-extension/blob/master/docs/API/Arguments.md]\n   */\n  enhancer = (options?: Object) => {\n    let subscription;\n    if (!this.isEnabled()) {\n      return null;\n    }\n\n    // Make sure changes from dev tools update angular's view.\n    environment.devToolsExtension.listen(({type}) => {\n      if (type === 'START') {\n        subscription = this.ngRedux.subscribe(() => {\n          if (!NgZone.isInAngularZone()) {\n            this.appRef.tick();\n          }\n        });\n      } else if (type === 'STOP') {\n        subscription();\n      }\n    });\n\n    return environment.devToolsExtension(options);\n  }\n\n  /**\n   * Returns true if the extension is installed and enabled.\n   */\n  isEnabled() {\n    return environment && environment.devToolsExtension;\n  }\n}\n"]}